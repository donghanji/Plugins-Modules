<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>validator module use ...</title>
<link type="text/css" rel="stylesheet" href="validator.css"/>
<style type="text/css">
html,body{width:100%;height:100%;}
</style>
</head>

<body>
<div class="formpanel">
	<div class="cell"><label class="label w60 tr">邮&nbsp;&nbsp;箱:&nbsp;</label><input tabindex="1" class="input" id="email"/><span id="email_error" class="error none"></span></div>
	<div class="cell"><label class="label w60 tr">密&nbsp;&nbsp;码:&nbsp;</label><input type="password" tabindex="2" class="input" id="psw"/><span id="psw_error" class="error none"></span></div>
	<div class="cell"><input tabindex="3" type="button" value="登&nbsp;&nbsp;录" class="btn" id="login"/></div>
</div>
<script type="text/javascript" src="../../../module.js"></script>
<script type="text/javascript">

(function(){
	module.config({
		'base':'../../../',
		'require':true,
		'dirs':{
			'libs':'libs',
			'modules':'modules',
			'plugins':'plugins',
			'mobile':'plugins/mobile'
		},
		'alias':{
			'validator':'{mobile}/validator'
		}
	});
	module.declare(['validator'],function(require,exports){
		var $=require('jquery.selector'),
			validator=require('validator');
		//验证初始化
		validator.init([{
				'id':'#email',
				'vtype':'email',
				'allowBlank':false,
				'blankText':'不能为空！',
				'vtypeText':'输入的邮箱地址未通过验证！',
				'maxLength':50,
				'maxLengthText':'邮箱账号不能超过50个字符！'
			},{
				'id':'#psw',
				'maxLength':20,
				'maxLengthText':'密码长度不能超过20个字符！',
				'minLength':6,
				'minLengthText':'密码长度最少为6个字符！'
			}]);
		function validate(){
			return validator.validate(function(id,error){
				alert(error);
			});
		};
		//登录
		$('#login').bind('click',function(){
			if(validate()){
				console.log('validate success!');
			}else{
				console.log('validate fail!');
			}
		});
	});
	
})();

</script>
</body>
</html>
