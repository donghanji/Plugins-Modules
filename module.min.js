/*
   module.js ,version 1.2.2 ,updated on 2015-11-30
   module for plugins modules library.

   https://github.com/donghanji/pm
 */

"use strict";!function(a,b){if(!a.module){var c=a.document,d=a.location.pathname,e={},f=Object.prototype.toString,g={SLASHDIR:/^\//,BASEDIR:/.*(?=\/.*$)/,JSSUFFIX:/\.js(?:\?\w+\=\w+)?$/,PARAMSUFFIX:/\.js\?\w+\=\w+$/,COMMENT:/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,REQUIRE:/(?:^|[^.$])\brequire\s*\(\s*(["'])([^"'\s\)]+)\1\s*\)/g,REQUIRE_FUN:/^function\s*\(\w*\)/,MODULENAME:/\/([\w.]+)?(?:\1)?$/,PLACEHOLDER_DIR:/\{([^\}\{]+)?\}/g},h={ERROR:-1,BEGIN:0,LOADING:1,LOADED:2,END:3},i={version:"1.2.2",options:{require:!1,nocache:!1,debug:!1,timeout:7e3,mined:"",base:"",dirs:{},alias:{},files:[],coms:{},defaults:{},globals:{}}},j=1,k=i.util={},l=i.path={};k.extend=function(){var a,b=arguments[0]||{},c=arguments.length,d=1;for(c===d&&(b=this,--d);c>d;d++)if(a=arguments[d],"object"==typeof a)for(var e in a)b[e]=a[e];return b},k.extend({type:function(a){return null==a?String(a):e[f.call(a)]||"object"},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isString:function(a){return"string"===k.type(a)},isFunction:function(a){return"function"===k.type(a)},isObject:function(a){return"object"===k.type(a)},isArray:function(a){return"array"===k.type(a)}}),k.now=function(){return(new Date).getTime()},k.uid=function(){return[k.now(),j++,Math.floor(1e6*Math.random())].join("")},k.isEmpty=function(a){return""===a||a===b||null===a?!0:k.isArray(a)?a.length?!1:!0:k.isObject(a)?k.isEmptyObject(a):!1},k.isEmptyObject=function(a){for(var b in a)return!1;return!0},k.each=function(a,c){var d=0,e=a.length,f=e===b||k.isFunction(a);if(f){for(var g in a)if(c.call(a[g],g,a[g])===!1)break}else for(;e>d&&c.call(a[d],d,a[d++])!==!1;);},k.each("Boolean,Number,String,Function,Array,Date,RegExp,Object".split(","),function(a,b){e["[object "+b+"]"]=b.toLowerCase()}),k.keys=Object.keys||function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},k.unique=function(a){var b={};return k.each(a,function(a,c){b[c]=1}),k.keys(b)},k.isInArray=function(a,b){if(!k.isArray(a))return!1;for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return!0;return!1},k.parseDependencies=function(a){a=a.replace(g.COMMENT,"");var b,c=[],d=g.REQUIRE;for(d.lastIndex=0;b=d.exec(a);)b[2]&&c.push(b[2]);return k.unique(c)},k.path2name=function(a){if(k.isArray(a)){var b=[];return k.each(a,function(a,c){c=k.path2name(c),b.push(c)}),b}var c=g.MODULENAME,d=c.exec(a);return d&&d.length>1&&(a=d[1].replace(g.JSSUFFIX,"")),a},l.dirname=function(a){var b=a.match(g.BASEDIR);return(b?b[0]:".")+"/"},l.realpath=function(a){var b=i.options.base;return-1===a.indexOf("//")&&(a=b+a),a};var m={},n=[],o={},p=i.options;p.base=l.dirname(d),i.replace=function(a,b){var c=g.PLACEHOLDER_DIR;return b.replace(c,function(){var b=arguments;if(b.length>=4){var c=b[1],d=a[c]||c||"";return b[3].replace(b[3],d)}return b[3]})},i.dirs=function(a){a=k.isObject(a)?a:{};var b=p.dirs;for(var c in b)b[c]=i.replace(b,b[c]);for(var d in a)a[d]=i.replace(b,a[d]);return a},i.config=function(b){b=k.isObject(b)?b:{},p=k.extend(p,b),p.alias=i.dirs(p.alias);var c=p.mined,d=/^\./;c=c&&!d.test(c)?"."+c:c,p.mined=c,p.require===!0&&(a.require=i.declare,a.define=i.declare,a.define.remove=i.remove),p.debug===!0&&(i.ModulesSet=m,i.ModuleCachesQueue=n,i.StatusCacheQueue=o,a.module=i)},i.alias=function(a){return k.isEmpty(a)?p.alias:(a=k.isObject(a)?a:{},a=i.dirs(a),void(p.alias=k.extend(a,p.alias)))},i.files=function(a){if(k.isEmpty(a))return p.files;if(k.isString(a)&&(a=[].concat(a)),k.isObject(a)){var b=[];k.each(a,function(a,c){b.push(a)}),i.alias(a),a=b}p.files=k.unique(p.files.concat(a))},i.globals=function(a){return k.isEmpty(a)?p.globals:k.isString(a)?p.globals[a]||"":(a=k.isObject(a)?a:{},void(p.globals=k.extend(a,p.globals)))},i.defaults=function(a,c){if(k.isEmpty(a))return p.defaults;if(k.isObject(a))for(var d in a)i.defaults(d,a[d]);else{if(a=i.aliasId(a),c===b)return p.defaults[a]||{};c=k.isObject(c)?c:{},p.defaults[a]=p.defaults[a]||{},p.defaults[a]=k.extend(c,p.defaults[a])}},i.scripts=function(){return c.getElementsByTagName("script")},i.createScript=function(a,d){d=d===b||d?!0:!1;var e=c.createElement("script");return e.setAttribute("data-requiremodule",a),e.type="text/javascript",e.charset="utf-8",e.async=d,e},i.getScriptData=function(a){var b=a.currentTarget||a.srcElement;return b.detachEvent?(b&&b.detachEvent("onreadystatechange",i.onScriptLoad),b&&b.detachEvent("error",i.onScriptError)):(b&&b.removeEventListener("load",i.onScriptLoad,!1),b&&b.removeEventListener("error",i.onScriptError,!1)),{node:b,id:b&&b.getAttribute("data-requiremodule")}},i.loadJS=function(a){var b=i.isInComs(a);if(a=null!==b?b:a,!(i.getStatus(a)>h.BEGIN)){i.statusSet(a,h.LOADING);var d=c.getElementsByTagName("head")[0],e=i.createScript(a),f=i.aliasId(a,"v"),j=l.realpath(f);if(p.mined&&-1===j.indexOf(p.mined+".js")&&!g.JSSUFFIX.test(j)&&(j+=p.mined),g.JSSUFFIX.test(j)||(j+=".js"),p.nocache&&!g.PARAMSUFFIX.test(j)){var m=p.nocache;k.isArray(m)?k.isInArray(m,f)&&(j=[j,"?t=",k.now()].join("")):j=k.isString(m)?[j,"?",m].join(""):[j,"?t=",k.now()].join("")}e.src=j,d.appendChild(e),e.attachEvent?(e.attachEvent("onreadystatechange",i.onScriptLoad),e.attachEvent("onerror",i.onScriptError)):(e.addEventListener("load",i.onScriptLoad,!1),e.addEventListener("error",i.onScriptError,!1))}},i.removeJS=function(a){a=i.aliasId(a),k.each(i.scripts(),function(b,c){return c&&c.getAttribute("data-requiremodule")===a?(c.parentNode.removeChild(c),!0):void 0})},i.onScriptLoad=function(a){var b=a.currentTarget||a.srcElement;if("load"===a.type||"readystatechange"===a.type&&("loaded"===b.readyState||"complete"===b.readyState)){var c=i.getScriptData(a),d=c.id;i.statusSet(d,h.LOADED),i.isInFiles(d)&&(i.compile(d),i.complete(d,[],function(){return{}}))}},i.onScriptError=function(a){var b=i.getScriptData(a),c=b.id;i.statusSet(c,h.ERROR),i.compile(c),i.removeJS(c)},i.statusSet=function(a,b){a=i.aliasId(a),o[a]||(o[a]={}),o[a].status=b},i.getStatus=function(a){return a=i.aliasId(a),o[a]&&o[a].status||h.BEGIN},i.load=function(a){k.each(a,function(a,b){i.loadJS(b)})},i.isInAlias=function(a){var b=p.alias;for(var c in b){var d=k.path2name(b[c]);if(c===a||d===a||b[c]===a)return{k:c,v:b[c]}}return null},i.aliasId=function(a,b){b=b||"k";var c=i.isInAlias(a);return a=c&&c[b]||a},i.isInFiles=function(a){var b=p.files,c=0,d=b.length;for(a=i.aliasId(a);d>c;c++)if(b[c]===a)return!0;return!1},i.isInComs=function(a){var b=p.coms,c=i.aliasId(a),d=i.aliasId(a,"v");for(var e in b)if(c===e||k.isInArray(b[e],c)||k.isInArray(b[e],d))return e;return null},i.isInModules=function(a){return a=i.aliasId(a),m[a]},i.noInModulesItems=function(a){var b=[];return k.each(a,function(a,c){i.isInModules(c)||b.push(c)}),b},i.isRequire=function(a){return a?g.REQUIRE_FUN.test(a):!1},i.moduleSet=function(a,b,c){if(a=i.aliasId(a),i.isInModules(a)&&k.isFunction(c)){if(i.isRequire(c.toString()))return c(this.declare);throw'module "'+a+'" already defined!'}k.isFunction(c)&&(m[a]={id:a,dependencies:b,factory:c})},i.compile=function(a){a=i.aliasId(a);var b=i.aliasId(a,"v");k.each(n,function(c,d){function e(){for(var b=0,c=f.length;c>b;b++)if(f[b]===a)return f.splice(b,1),i.compile(a)}if(d){var f=d.links||[];if(k.isInArray(f,a)||k.isInArray(f,b)){if(f.length<=1){var g=d.id||k.uid(),h=d.dependencies||[],j=d.factory||"",l=m[a]||{},o=l.dependencies||[];h=h.concat(o),h=k.unique(h),n.splice(c,1),i.complete(g,h,j)}e()}}})},i.complete=function(a,b,c){i.moduleSet(a,b,c);var d=i.exports(a);return i.compile(a),d},i.build=function(a){var b=a.factory;a.exports={},delete a.factory;var c=b(this.declare,a.exports,a);return k.isEmptyObject(a.exports)&&(a.exports=c||{}),a.exports},i.exports=function(a){if(i.isInModules(a)){a=i.aliasId(a);var b=m[a].factory?i.build(m[a]):m[a].exports;return b}return null},i.declare=function(a,b,c){b=b||[],k.isArray(a)&&(c=b,b=a,a=""),k.isFunction(b)&&(c=b,b=[]),k.isFunction(a)&&(c=a,b=k.parseDependencies(c.toString())||[],a=""),a=a||k.uid();var d=i.noInModulesItems(b);if(d&&d.length){var e={id:a,dependencies:b,factory:c,links:k.path2name(d)};return n.push(e),i.load(b)}return i.complete(a,b,c)},i.remove=function(a){a=i.aliasId(a),a&&(i.removeJS(a),delete o[a],delete m[a])};var q=["config","alias","files","globals","defaults","declare"];a.module=a.module||{},k.each(q,function(b,c){a.module[c]=i[c]})}}(window);